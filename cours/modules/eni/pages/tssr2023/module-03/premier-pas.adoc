= Module 02 - Les premiers pas et les premières commandes
:navtitle: Premier pas & première commandes

== Connexion

=== Connexion : 

Pour se connecter à un système UNIX, un utilisateur doit disposer d'un login auquel est associé un mot de passe. Il existe plusieurs façons de se connecter à un poste Linux : 

****
* Via un terminal texte (généralement sur un serveur)
* Via une interface graphique (il faudra alors lancer une application pour accéder à un terminal, exemple : terminator)
* À distance via une connexion SSH (généralement pour configurer un serveur)
****

Une fois authentifié, un prompt sera mis à disposition de l’utilisateur. 

==== Via un terminal texte

Quand un terminal permet la connexion d'un utilisateur, il propose une invite de type : 

----
Viperr 10 shub-niggurath tty1 

Shub-niggurath login : 
----

À cette invite, il faut entrer le login pour provoquer l'affichage de l'invite de saisie du mot de passe : 

----
Shub-niggurath login: clement 
password: 
----

Le système vérifie l'existence du login et la cohérence du mot de passe avant d'afficher le message de bienvenue (stocké dans le fichier */etc/motd*) et l'invite du Shell de connexion : 

----
Linux shub-niggurath 4.13.15-200.fc26.x86_64 #1 SMP Tue Nov 21 21:10:40 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux 
Viperr release 10 (Vipera shub-niggurath) 
Welcome to Viperr 
clement@shub-niggurath:~$ 
----

Si la connexion ne peut être établie (mot de passe incorrect), et après un certain nombre d'essais, le compte utilisateur pourra être verrouillé. Celui-ci devra alors demander à l'administrateur d'intervenir.

==== Via une connexion graphique

C’est un display manager qui sera en charge de l’authentification (le plus fréquent est actuellement gdm3 ). 

image::tssr2023/module-03/premier-pas/01.png[01.png]

==== Via une connexion ssh

Le protocole SSH est un des protocoles d’administration distante le plus utilisé. 

===== à partir d'un poste windows 10 ou Linux

Il est possible d’utiliser des clients SSH comme putty, kitty, mRemoteNG, mobaxterm ou la commande SSH incluse dans Windows 10. 

----
Penthium2@viperr:~$ ssh penthium@proxy-eni.local 
----

===== Considération générale lié à la sécurité

Il est fortement déconseillé de se connecter à distance en utilisant directement le compte d’administration du système (root). 

=== Déconnexion

La commande de déconnexion (fermeture de session) dépend de l'environnement Shell de l'utilisateur. 

* Bourn Shell `*exit*`               `*^d*` (`*^d*` correspond à la combinaison de touche : `*[ctrl]+[d]*`) 
* C Shell      `*n%*`     `*logout*`
* Korn Shell   `*exit*`              `*^d*` 
* Bash         `*exit*`   `*logout*` `*^d*` 

== TTY : Affiche le nom du terminal


|===
^.^| Syntaxe : *tty*
|===

.Exemple :
[source,bash]
----
$ tty
/dev/pts/1
----

Cet exemple illustre le résultat de la commande initiée par un utilisateur connecté via un client SSH au poste ou un terminal en session graphique : connexion au *second* pseudo terminal (/dev/pts/1). 

On pourra aussi avoir en retour de la commande le résultat suivant pour une connexion à la console du serveur : 

[source,bash]
----
$ tty
/dev/tty1
----

Il existe deux types de terminaux : 

* *La console* : un accès à un terminal donnant directement un Shell après login (on peut parler d'accès physique à la machine)
* *Le pseudo-terminal* : accès à un terminal via une application ou un démon (daemon), par exemple : connexion SSH, terminal graphique, etc.)

== Logname : Affiche le login de connexion

|===
^.^| Syntaxe : *logname*
|===

Commande simple, pas de paramètre. 

.Exemple : 
[source,bash]
----
$ logname
Tom
----

== ID : Affiche les noms et identificateurs groupes et utilisateurs

|===
^.^| Syntaxe : *id*
|===

.Exemple : 
[source,bash]
----
$ id
id=1062(Tom) gid=1063(Tom) groups=1063(Tom),1064(comptables),1065(direction) 
----

Les informations fournies sont les suivantes : 

* Je suis connecté en tant que Tom
* Mon identifiant unique d'utilisateur est le 1062
* J'ai pour groupe actif le groupe Tom (identifiant unique de groupe 1063)
* J'appartiens aussi aux groupes secondaires suivants : comptables (identifiant unique de groupe 1064) et direction (identifiant unique de groupe 1065)

